


          《金庸群侠传》Fish修改器V0.72测试版

                  使  用  说  明


2006.1.31 发布

    说明：
     1. 本版修改器直接使用最新的z.dat，随修改器发布。使用修改器前务必用新
         的z.dat覆盖游戏目录下的旧的z.dat !!!!    

     2. 此次修改的时间比较紧张，故没有提供完整安装版。如果不能运行，可以下载0.71的完全安装版，安装后再把
        此版本解压覆盖到安装目录。
    
     3. 由于此版本推出时间紧张，没有做充分测试。大家可以多测测看有没有bug，尤其是指令指导部分是否与指令
        功能一致。

    增加功能：

    1. 所有50指令增加了指令的指导，方便写50指令。不用一个一个写数字了。
    
    2. 增加和修改了几条新指令：
       a. 四则运算指令(3)增加了求余数.
       b. 增加定义变量名指令，可以定义10个字符的变量，便于显示指令说明和在指令指导中使用变量
       c. 访问给定地址指令(25,26)增加了一个偏移量参数，方便循环访问内存地址的值
       d. 增加改变主地图坐标指令(42)
       e. 增加调用其它事件指令(43)
       具体的说明可以参见addkdef.doc
    
    3. 增加了自定义z.dat修改功能
           大家对z.dat的手工修改可以按照一定格式写在文件custom.ini中，不要直接用UE修改z.dat，这样以后
       出新版本的z.dat后可以方便升级。注意custom.ini文件必须放在游戏目录，具体的格式参见修改器带的
       custom.ini文件里面的说明。

           在"z.dat修改"窗口中按“自定义修改z.dat”即可根据custom.ini的内容修改z.dat, 注意此时只修改custom.ini，
       窗口其它修改项并不会修改到z.dat，必须按“修改z.dat”才可以修改。一般情况下可以先按“修改z.dat”，
      再按“自定义修改z.dat”。

    4. 可以实现升级z.dat
           当再发布新的z.dat时，可以把对原来z.dat的修改升级到新的z.dat上。

           对z.dat手工修改已经记录在custom.ini中。此版本修改器在按“修改z.dat”时，会自动在游戏目录下生成
      ModifyZ.ini文件，记录窗口中修改的内容。这样所有的修改都记录下来。

          升级的步骤：
          1. 假设已经有以前版本的ModifyZ.ini文件和custom.ini文件。而且有新版z.dat
          2. 备份custom.ini
          3. 把ModifyZ.ini的内容复制到custom.ini中，放到游戏目录下。注意不要复制最后的End行。
          4. 运行自定义修改z.dat功能。
          5. 关闭z.dat修改窗口，并重新打开，这时对z.dat的修改应该体现在窗口的控件中。
          6. 用备份的custom.ini覆盖游戏目录下的同名文件。以免以后出现重复修改。

        注意：“新游戏属性编辑”对z.dat的修改此次没有保存，因此升级后仍然需要重新修改。等待以后版本增加吧。

    5. 增加建筑海拔功能修改了编号为0的空建筑不能升高海拔的问题。

    6. 修正了少改了一个主地图实际贴图个数的问题。
        另外需要注意的是，IDX文件的大小不能超过65536，也就是每个IDX文件不能超过16384项。
     




          《金庸群侠传》Fish修改器V0.71测试版

                  使  用  说  明


2006.12.24 发布


     说明：
     1. 本版修改器直接使用最新的z.dat，随修改器发布。使用修改器前务必用新
         的z.dat覆盖游戏目录下的旧的z.dat !!!!    
     2. 使用新版z.dat时要注意复制一份e00.wav, 并改名为atk24.wav. 
        因为原z.dat有个bug，atk23后紧跟着就是e00.wav,并无atk24.wav文件。

     主要新增功能：
     1. 新增加两条50指令, 滚动菜单指令(40)和显示图片指令(41). 具体说明参看附带的文档Addkdef.doc

     2. 场景地图编辑增加批量修改海拔指令。具体方法为：            
              设置操作模式为块操作，操作层为建筑海拔。然后按下鼠标左键并拖动即可标记一个块。然后在
          块的范围内按左键升高整个块包括的建筑的海拔，按右键降低海拔。在块外点击即可取消块。

              目前只能修改建筑海拔，不能修改空中海拔。

     3. 恢复新游戏属性选择

     4. 增加游戏加密的功能，保护修改者的产权。
            目前只实现了kdef加密。加密后的kdef不能被修改器读取。以后将实现R*的加密            
            在“游戏加密”模块中选择kdef加密。然后确定即可对kdef进行加密。加密后新生成z.dat.new,kdef.idx.new
        和kdef.grp.new三个文件。然后备份好原来的文件，用这三个文件替换原有文件即可。
        
            注意要保存好未加密的文件，加密后即无法还原。
           
     5. 重新增加640*480的设置与取消。这次设置和取消可随时设置。

     6. 增加闪烁的控制。可以取消地图闪烁效果，以免导入的贴图出现不希望的闪烁。

       5/6的设置参看z_modify.txt






          《金庸群侠传》Fish修改器V0.70测试版

                  使  用  说  明


2006.9.26 发布

   说明：
       1. 本版修改器直接使用新的z.dat，随修改器发布。使用修改器前务必用新
          的z.dat覆盖游戏目录下的旧的z.dat !!!!    
       2. 本版主要增加新功能，基本未对原有功能进行完善，大家提出的意见将在后续版本中逐渐完善。
       3. 本版本由于时间紧张，暂时不提供修改为640*480功能和新游戏属性编辑功能。这些功能下个版本将提供。
       4. 此次新增功能比较多，可能会有一些问题。如果大家有什么问题，可以在铁血丹心论坛
          http://txdx.cc.topzj.com/index.php发贴，或给我mail:jywindow@163.com, 或者在我的
          网络空间中留言http://free.ys168.com/?swimmingfish


   主要增加功能: 

    1. 新增若干条指令，同时事件修改器可以识别新指令
           新增的具体指令参见 addkdefV1.0.doc，word2000文档。


    2. 事件修改器进行了修改，以便可以识别新指令，具体修改为
       a. 可以解释新指令的含义，但是解释比较简单，大家还是需要随时查看文档。
       b. 可以自由处理跳转指令，增加跳转指令可以设置跳转方向向上或向下
       c. 增加把一条事件的全部指令与剪贴板之间互相复制的按钮。主要用来手工编写指令和
          大家共享指令片断。
            复制的格式为纯文本，可以用记事本编辑。具体格式为：               
               1. 每行为一条指令，";"分号后的内容都是注释。
               2. 指令的每个字依次用数字表示，中间用空格隔开。
              
            大家可以用文本编辑器修改指令，但要保证以上的格式。
            如果修改了指令，注意跳转指令的偏移量需要手工调整。因此不建议在文本编辑器中
        修改影响跳转的指令。   

       d. 增加上下移动指令的按钮，方便调整指令的顺序，主要用来调整跳转标号的位置。
       e. 删除指令可以直接删除跳转指令了，跳转标号会自动删除，而不管跳转标号的位置。


       注意：
          1. 跳转指令尽量不要用复制指令，建议直接从增加指令按钮增加。以便可以选择跳转
             的方向是向上还是向下
          2. 用按钮移动指令时，修改器自动保证在跳转指令和相应的标号之间只有一条其他指令。
             标号不能紧挨着相应的跳转指令，以便正确处理跳转上下的方向。如果需要调整跳转
             的上下方向，只能删除然后再增加指令。

    3. 直接提供了修改后的z.dat。主要功能为：
           1. 增加新指令
           2. IDX条目增加到16384
           3. 人物增加到720
           4. 物品增加到344
           5. 场景增加到315
           6. 武功增加到361
           7. 增加Game**.xmi的个数99个，game00.xmi-game99.xmi, 每个文件大小不超过20000Byte
           8. 增加Atk**.wav的个数 , 每个文件大小不超过30000Byte
           9. 增加e**.wav的个数  , 每个文件大小不超过35000Byte
          10. 增加fight***.idx/grp的个数
          11. 增加山洞个数30个
          12. 增加可加入人物个数100个，并且没有人物编号<127的限制
          13. 增加武功武器配合个数
          14. 增加武功效果数
          15. 增加可升级个数和每次升级的经验值。
          
          新的z.dat随修改器发布，同时也提供了旧的z.dat, 名字为z_old.dat       

    4. 修改了z.dat编辑功能。以适应新的z.dat. 
           具体的编辑参见z_modifyV2.0.dat

           

    5. 可以记录当前操作目录，不用每次都选择了。
           当前游戏目录保存在Fishedit.ini文件中的[Run]-Gamepath项。如果设置了错误的目录导致程序出错的话，
       必须先把此项设为空，然后重新运行修改器设置正确的目录。


        



          《金庸群侠传》Fish修改器V0.65测试版

                  使  用  说  明


2006.2.4 发布

     主要增加功能
     1. big5下可以用了。不过好像大地图显示场景名字还不行，不知道什么原因。
     2. 可以修改游戏分辨率为640*480*256色。这次大家导入的人物头像可以清楚一些了。
        在z.dat高级修改中，选择"屏幕分辨率640*480"即可。
   
        注意：
        1. 与0.6版修改后的z.dat可能不兼容，建议从原始z.dat开始修改。
        2. 修改分辨率后就不能再修改人物、物品等容量了。因此若要修改容量，可最后再修改
           分辨率.
        3. 由于使用了vesa, 与windows不兼容，无法切换回windows(我的2000一切换就死机), 
           只能从游戏正常退出。(无法截图了)
        4. 此功能修改地方较多，大家注意测试有无问题。

     3. 增加修改战斗地图功能，操作方法与场景地图基本一致。    

     4. z.dat修改增加调整伤害生命和受伤程度比例，缺省的比例为10，即减少100生命，受伤程度
        增加10点。调整此值即可避免9999生命时自动战斗减少几百点就开始吃药的情况。一般
        受伤程度增加到50点时就可能会吃药。因此可以根据生命最大值把比例相应调大。
       



          《金庸群侠传》Fish修改器V0.6测试版

                  使  用  说  明


2006.1.15 发布

       由于功能增加了，不好再叫事件定义&对话修改器了，从这个版本起，改名为Fish修改器。

   主要增加功能：

    1. 改为多文档界面。操作更方便
    2. 增加R*,可以增加人物，武功，场景，物品的容量
    3. 增加D*S*修改器。支持块操作,方便大范围修改
    4. 增加z.dat 高级修改，配合2，可以使游戏正确处理增加的容量
    5. 增加主地图修改器。支持块操作,方便大范围修改
    6. 增加贴图查看/修改器，可查看，修改贴图，并可以拖动选择的贴图到主地图修改和
       D*S*修改器图片区，方便修改地图。
    7. Z.dat修改增加修改山洞列表和武功武器配合列表
    8. 增加初始属性编辑器，方便新游戏选择属性，可以把初始资质显示出来。
    9. 对话/事件编辑器在修改对话时增加了自动排列星号的功能。

   注意：
    1。本修改器使用合并后的场景贴图文件sdx/smp和wdx/wmp, 请把这两个文件拷贝到游戏目录。
    2。本版修改器改动文件较多，为有效保护你的工作，请尽量多进行游戏文件备份。
    3。修改器缺省读取R1文件中的名字信息，因此如果修改了R1后，请在菜单选择读取R1，重新
       读取R1文件，否则其它模块可能不能显示修改后的效果(如修改了人名以后)
     

    
    增加增加人物、武功、场景、物品的个数的操作步骤：

    1. 打开R*编辑，增加相应的项目(人物、武功、场景、物品)个数，修改后保存。
        只能增加和删除最后一个项目。
        增加项目缺省值从当前项目中复制
    2. 手工把修改后的R*.idx复制到ranger.idx。游戏实际只读取这个idx。
        为保持一致性，最好三个R*修改的项目数一样多。
    3. 如果需要增加场景地图，则打开D*S*编辑，增加场景地图
        场景编辑主要用鼠标左右键操作当前操作层。可参考状态栏的说明。
        按“选择贴图”可打开贴图查看器，可从查看器中拖动贴图到操作区来选择贴图。
        只能增加和删除最后一个场景
        增加场景后务必在R*中修改场景信息。
    4. 手工把修改后的 S*.idx复制到allsin.idx和allsinbak.idx,
                      D*.idx复制到alldef.idx和alldefbak.idx, 
        为保持一致性，最好三个进度修改的场景数一样多。
    5. 打开z.dat高级编辑，选中全部检查框，
          如果增加场景，修改实际场景个数为R*中定义的场景个数，并修改实际的D*和S*文件大小
          如果增加物品，可能需要修改物品编号起始地址。
              物品贴图保存在主地图，场景地图和战斗地图三个贴图中，起始地址都是3501(7002).
          共200个，如果增加物品，则必须使后面有相应的贴图。这是需要调整所有物品贴图的起始位置
          以便统一。如果不调整，则需要覆盖主地图贴图后面船的贴图(水上飘不用船也可以)，场景贴图
         后面有动画贴图可以挪到后面，战斗贴图最简单后面没有，可直接添加。


    
    以下为主要新增模块功能说明：
    
   
    一. R* 编辑器 
            
         1. R*分为基本数据、人物、物品、场景、武功、小宝商店6类，每类有若干项目，选择相应类别和项目
            项后即可查看项目项不同的数据。
         2. 双击列表框修改具体值。
         3. 可增加项目到最后，新增加项目的属性缺省为当前显示项目值，但不要增加基本数据和小宝商店。
         4. 可删除最后一个项目。
         5. 如果修改了名字或增加项目，最好保存进度后再读入，以便正确显示修改后的名字。
         6. 修改保存完毕后，如果增加了项目，则必须手工把修改后的R*.idx复制到ranger.idx。


    二. D*S*编辑器

         1. 修改时必须选定操作层，然后用鼠标在图片区操作，操作含义见下表
         2. 操作模式分为：正常模式、块操作模式和删除模式。块操作模式一次可操作一个块。大大增加了新建
            场景地面的绘制速度，不用一格一格按了。
                     

                           正常模式              块模式             删除模式

             层1地面      左键拾取贴图       按下左键并拖动拾取块   右键删除当前贴图
                          右键粘贴贴图       右键粘贴块

             层2建筑      左键拾取贴图       按下左键并拖动拾取块   右键删除当前贴图
                          右键粘贴贴图       右键粘贴块

             层3空中      左键拾取贴图       无                     右键删除当前贴图
                          右键粘贴贴图

             层4事件      左键修改场景事件   无                     右键删除当前事件
                          右键增加场景事件

             层5建筑海拔  左键升高海拔       无                     右键设海拔为0
                事件海拔  右键降低海拔

             层6空中海拔  左键升高海拔       无                     右键设海拔为0
                          右键降低海拔 

         3.  支持拖放操作选择贴图。按“选择贴图”打开贴图查看/修改器。选择合适贴图后可直接拖放到图片
             区即自动选择贴图，然后即可进行操作。
             修改事件时的三个贴图编号也可以用拖放的方式修改。
             最好调整两个窗口合适大小，以方便进行拖放操作。
   
         4. 可以增加最后一个场景，增加时可以选择新场景和复制当前场景 
         5. 可以删除最后一个场景。
         6. 如果增加了场景，则必须按以上操作步骤的要求进行操作，以保证游戏能正确读取。

    三. 主地图编辑

        1. 主地图结构
           主地图分4层，
               层1为地面，earth.002(480*480)，值为地面贴图编号*2
               层2为表面，如道路，花草，surface.002(480*480), 值为表面贴图编号*2
               层3为建筑。building.002(480*480),值为表面贴图编号*2
               层4为建筑引用。buildx.002(480*480)为引用x坐标，buildy.002(480*480)为引用Y坐标。
                   
                   设置层4的意义是层3的建筑如果大于一格时，需要确认哪些格可以通过，哪些格不能
               通过，并据此确认建筑的正确显示顺序。每个格的引用坐标(x,y)即表示此格为坐标(x,y)
               位置的建筑的范围。为0表示没有引用，主角可以通过
                   一般树木类型的建筑范围为一格，房屋范围一般为方形的几格，有些山脉的格子是不
               规则的。

         2. 修改时必须选定操作层，然后用鼠标在图片区操作，操作含义见下表
         3. 操作模式分为：正常模式、块操作模式和删除模式。块操作模式一次可操作一个块。大大增加了新建
            场景地面的绘制速度，不用一格一格按了。
                     

                           正常模式              块模式             删除模式

             层1地面      左键拾取贴图       按下左键并拖动拾取块   右键删除当前贴图
                          右键粘贴贴图       右键粘贴块

             层2表面      左键拾取贴图       按下左键并拖动拾取块   右键删除当前贴图
                          右键粘贴贴图       右键粘贴块

             层3建筑      左键拾取贴图       无                     右键删除当前贴图
                          右键粘贴贴图                              删除建筑同时自动
                          粘贴贴图只设置当前                        删除所有引用
                          坐标位置层4引用

             层4引用      左键拾取当前引用   无                     右键删除当前引用
                          右键粘贴当前引用
 
          
         4.  操作层4时应该选择"只显示操作层"和"显示网格"，可以显示每个网格的引用
             当删除所有一个建筑所有引用时，这个建筑就显示不出来。
             在修改层3时，只在层4中相应格描述建筑信息，如果修改或增加的建筑大于一格，
         必须手工天际其余格。修改方法为：
             菜单设置“只显示操作层”和“显示网格”，操作层选“引用建筑”，可以看到
         建筑和每格引用的建筑。左键复制当前格的引用，右键在实际覆盖格粘贴即可。

         5.  支持拖放操作选择贴图。按“选择贴图”打开贴图查看/修改器。选择合适贴图后可
             直接拖放到图片区即自动选择贴图，然后即可进行操作。
             

    四. 贴图查看/编辑     
         
         1. 可在下拉框选择主要贴图查看编辑，也可以直接在文本框输入文件名查看
         2. 在图片区单击右键可激活菜单。
         3. 支持拖放操作，可拖动选择的贴图到其它窗口
         4. 可复制当前贴图，然后粘贴到其它编号
         5. 可增加最后一个贴图
         6. 可删除最后一个贴图
         7. 菜单选择编辑，可打开“贴图编辑”编辑当前贴图

    五. 贴图编辑
         
        1. 显示游戏256色调色板，可选择游戏颜色修改贴图，主要用于局部修改从剪贴板粘贴转换过的贴图。
           因把真彩色转换为游戏256色可能有些地方效果不好，可手工修改一下。
        2. 右侧图片放大操作区可放大逐个修改象素，左键选择当前象素颜色，右键修改象素为当前颜色
        3. 支持剪贴板操作，可复制到剪贴板或从剪贴板复制新图。从剪贴板复制时自动设置图片大小
        4. 颜色转换目的是从剪贴板复制过来的图象颜色转换为256色。有两种转换算法，一种按RGB最小匹配，
           一种按YUV最小匹配。二者其实差不多，可选择效果好的。
        5. 可设置当前选中颜色为透明色，将把图片中所有这个颜色的象素透明。用于把其它编辑器的图片背景
           色转换为透明。
        6. 图片宽高均不能超过256个象素。

    六. 新游戏属性编辑
        
        1. 可修改新游戏初始属性值以及随机范围和秘笈值。选择初始属性，修改后请按“修改”按钮
        2. 可修改显示的初始属性，选择显示位置，修改显示变量和显示格式字符串，修改后请按“修改”
           可显示资质！
           显示格式字符串就是c语言printf的格式，注意不要超过9B长度，如果修改为%4d可以去掉":"
        3. 如果进行了z.dat高级修改，可能不能正确显示显示变量的名字，直接设置即可。注意设完后要
           再次进行z.dat高级修改，否则不能正确显示变量。
         







          《金庸群侠传》事件定义&对话修改器V0.5测试版

                  使  用  说  明



   增加功能：
      1. z.dat 修改。详细功能参见 z_modify.txt文件
      2. 批量修改对话人物贴图。
           在主窗口的"事件指令"区，点鼠标右键，选择菜单即可激活修改窗口。
      3. 复制粘贴整个事件
           在主窗口的"事件指令"区，选择准备复制的事件，点鼠标右键，选择"复制整个事件"。
           然后再选择准备粘贴的事件，选择"粘贴整个事件"即可。
           注意最好先增加一批空的事件，然后再进行粘贴。系统目前只能再现有的事件编号范围
       内粘贴，不能直接粘贴到新的事件上。

               
   修改Bug：
         
     1. 修正了编辑指令1B(显示动画)窗口中不手工选择场景时显示动画出错的Bug。
     2. 增加/删除/修改指令后指令列表刷新后停留在修改的位置
     3. 修正了显示有的场景贴图不能完全显示的Bug





2004.9.9 发布
     主要增加功能：
     
     
     可以增加/删除新的战斗场景。以后再修改游戏不怕战斗不够了。不过战斗地图只能从现有的26个
     地图中选，不能增加。战斗地图要求不高，这26个也够用了吧^_^
     
     1. 在战斗窗口任选一个战斗，按“增加战斗”即可增加一个新的战斗，战斗内容缺省与刚选的
        战斗一样，然后可以进行修改工作。注意修改完后要按“修改”才会真正修改。
         
     2. 可以修改战斗名字，注意名字不要超过4个汉字

     3. 可以删除最后一个战斗场景。



2004.6.27发布
     主要增加功能：
     1. 增加了复制/粘贴指令的功能，在指令列表框中，单击鼠标右键可激活弹出菜单，有copy,paste
        两个菜单项。
        指令列表框中的指令可以多选。
        
        注意：必须保证选中的指令中包括完整的跳转指令，即要有跳转指令和要跳转的label。否则后
              果自负


     2. 未读取文件时现在所有的控件都不能操作。



          《金庸群侠传》事件定义&对话修改器V0.4测试版

                  使  用  说  明



2004.6.12 发布
     主要增加功能：
     1. 增加了编辑战斗场景设定的功能，
            编辑战斗场景非常有用，可以选择参战人物，可以把主角的缺省选中状态去掉，可以把自动
        选人战斗的场景修改为可以手工选人。可以不再单挑了。还可以修改敌人的数量和人。可以最后
        一战修改为挑战20大高手^_^。

     2. 增加显示战斗场景地图的功能。
            可以合理安排人物位置，关键是不要把人安排到树上或者墙上。    




          《金庸群侠传》事件定义&对话修改器V0.3测试版

                  使  用  说  明


2004.6.6 发布
     主要增加功能：
     1. BIG5繁体系统下也可以正常显示工作了。

          《金庸群侠传》事件定义&对话修改器V0.2测试版

                  使  用  说  明


2004.5.19 发布
     主要增加功能：
     1. 导出kdef文件为翻译过后的文本文件，大家可以慢慢研读游戏逻辑
     2. 主要指令修改增加了指导窗口。方便大家修改
     3. 修改了指令说明文件kdef.ini. 增加了原先不清楚的指令含义。




           《金庸群侠传》事件定义&对话修改器V0.1测试版

                        使  用  说  明


    本程序的编制得到了冰蓝论坛(http://www.binglansky.com/bbs/index.asp)的
wind、chaoliu和其它冰蓝朋友的大力帮助，在此向他们表示感谢！

    急于在51前推出，目前功能极其简单，没有容错机制，可能还有很多Bug，另外98
下好像不能用，只能在2000下使用，请大家包涵。大家使用中发现问题和建议请及时
提出，可在冰蓝论坛发贴或者Mail:jy_fish@sina.com. 我会尽快改进的。

    目前功能说明：
        对话修改：
            1. 修改对话
                   在“对话”下拉框中选择对话，在修改文本框中直接修改，然后按
               “修改对话”即可。

            2. 增加对话
                   直接按“增加对话”即可，然后再按修改的方式输入对话内容

            3. 删除对话
                   直接按删除即可删除最后一条对话，只能删除最后一条。

            4. 导出全部对话

        事件修改
            1. 修改当前事件的指令
                   在"事件编号"下拉框中选择事件，在“事件指令”中选择要修改
               的指令, 在指令编辑中选择要编辑的指令字，然后在“编辑指令字”
               框中修改。
                   要保存依次按“修改指令字”，“修改指令”，“修改事件”即可。


     将要实现的功能：
            增加事件
            删除事件
            增加指令
            删除指令     
            用友好的方式修改指令，避免现在直接输入数值


    建议大家使用时参考附带的两个文件：
        kdef.ini         每个指令的说明，修改时参考
        evtlist.ini      每个事件的含义，查找事件时参考

    以后我会写详细的说明的，目前没有时间，请大家见谅



                                                冰蓝论坛之游泳的鱼
                                                   2004.4.26



修改历史：


2004.4.30 
    
    完成增加/删除事件，增加/删除指令的功能。

2004.4.27
    今天修改了big5转码，可以在98下使用了。
